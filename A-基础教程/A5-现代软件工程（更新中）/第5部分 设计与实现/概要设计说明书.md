
# 概要设计说明书

在微软，通常把概要设计说明书称作 Dev Spec 或 Design Spec，因为这是 Developer 要完成的任务。如果软件规模大的话，通常由 Dev Manager 或 Dev Lead 来撰写，如果是一个局部功能，就由 IC（Individual Contributor，即开发人员）来撰写。

概要设计说明书是概要设计阶段完成后的输出。

## Overview and Terminology 概述与概念

### 任务概述

可以摘抄需求规格说明书（PM Spec）的主要内容。

### 术语解释

对一些设计领域或者程序内部模块、子系统命名的术语加以说明。

## Environment and Architectural 运行环境与总体设计
### 运行环境

描述软件分发/上线后的运行环境：

- 软件运行环境
  
  如 iOS 或 Android 手机系统、Windows 系统（台式机、HoloLens、Xbox、Surface Hub）、Linux 系统等。

- 硬件运行环境
  
  比如：智能手机、独立计算机、服务器、虚拟机、云端服务等，应包含对内存、硬盘、网络的要求。

### Architectural Design 架构设计

架构设计是一个很虚的概念，可以表现出来的形式有很多。笔者推荐下面的定义：

- 分层设计
  
  分层，首先需要功能分类，相同类别的功能可以构成大模块或者子系统。最流行的三层结构，即表示层、业务逻辑层、数据访问层，可以普遍适用到所有软件架构中。因为在三层结构的框架上，最上层总是用户接口，最下层总是数据存储，当然如果你的软件是一个局部模块开发，就不需要三层结构，而是要简单的多，那么基本上也不用分层设计了。
  
- 模块/子系统设计

  各个软件系统不同的地方在于中间的业务逻辑层，可以有很多变化，比如：

  - 可以再细分成多层
  - 可以在同一层分割成很多模块
  - 可以是外部系统

这里并不涉及模块内部的细节（属于详细设计范畴），只考虑外部轮廓。

【slide】

## Interface and Interaction 接口设计

传统教材会在这部分定义“内部接口”和“外部接口”，笔者认为是不准确的。

内部接口全都是程序接口，而外部接口应该包括：

- 用户接口（当外部使用者是人类时，提供对人类友好的界面）
- 程序接口（当外部使用者是计算机时，提供对计算机友好的编程接口）

由于“用户接口”已经有单独定义了，所以“外部接口”只包含“程序接口”，不如直接把“内部接口”和“外部接口”合并在一起称为“程序接口”。

### 用户接口

这是一个独立的文档，一般包含：

- 用户界面设计图
  
  业内成为 Redlines（红线图），因为红色很少用于界面元素中，所以用红线来做标记。

- 用户交互流程图
  
  用户在界面A上点击不同的按钮后，会跳到不同的新页面，从界面A的各个按钮上会引出一条条红线到其它界面。

由 Designer 完成，交给开发人员实现。

【slide】

### 程序接口

内部接口，一般包含以下几种形式：

- 函数调用
- 进程间通信（管道或者套接字）
- RESTful API

程序接口可以用两种图来表示：

【slide】

分层关系接口图，组件交互时序图。


## Static and Dynamic Data Design 数据设计

数据设计，一般是指对永久存储的数据的设计，包含数据库和数据文件两类。

### 数据库设计

一般是指关系式数据库。主要涉及的内容包括：

- 表
- 主键、外键、索引
- 存储过程


（非关系式数据库是否包含在此？）

### 数据文件设计

一般是从类的属性做序列化得到数据文件，可能包括的数据文件类型有：

- 二进制
- 纯文本
- XML 扩展标记语言
- JSON 对象标记语言

### 数据接口设计

传统教材并不包含此类别的数据设计。

由于计算机软硬件技术的发展，有很多类型的数据是内存或网络中的临时运行用数据，比如：

- 栈
- 堆
- 数据包
- 消息队列

消息队列组件，队列中的数据平时是在内存中的，为了怕丢失任务，所以组件把内存中的数据也存储在了磁盘上。

## Process and Threading 进程/线程运行设计
### 运行模块组合
### 运行控制
### 运行时间


## Telemetry and Flighting 日志与试验

### Telemetry 日志

这个工作其实应该是 PM 的工作，定义哪一个用户行为需要记录日志，比如：

- 打开应用
- 点击按钮
- 打开某个网页
- 收藏了某个网页
- 关闭应用

这些日志会最终发送到服务器上，作为用户行为分析的数据源。

### Flighting



## Exit Criteria and Open Issues 

Mark open issues in the body of this document using the Open Issue style.  Update the table below by right-clicking on it and selecting Update Field. 

## Timeline and Work Item 工作计划

根据项目大小，有可能是多人合作完成，或者是单人独立完成：

- 多人合作
  
  列出分工及计划，如：

  |人员|工作|初步计划|
  |--|--|--|
  |木头|管理子系统|3周|
  |石头|推理子系统|4周|
  |肖哥|训练子系统|5周|
  |毛毛|存储接口模块|2周|

- 单人完成

  列出模块划分、完成时间。

  |模块名称|初步计划|
  |--|--|--|
  |Azure Blob 数据读写模块|2天|
  |Flask Restful 服务|10天|
  |发送邮件模块|3天|
  |开关 Azure 虚拟机模块|5天|
  